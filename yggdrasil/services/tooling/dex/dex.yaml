dex:
  config:
    # Set it to a valid URL
    issuer: https://{{ .Values.ingress.hosts.auth.host }}

    # See https://dexidp.io/docs/storage/ for more options
    storage:
      type: memory

lethe:
  enabled: false
  # secretStores:
  #   - name: sso-secret-store
  #     providers:
  #       vault:
  #         server: "http://vault.tooling.svc:8200"
  #         path: "k8s"
  #         version: "v2"
  #         auth:
  #           # Authenticate against Vault using a Kubernetes ServiceAccount
  #           # token stored in a Secret.
  #           # https://www.vaultproject.io/docs/auth/kubernetes
  #           kubernetes:
  #             # Path where the Kubernetes authentication backend is mounted in Vault
  #             mountPath: "kubernetes"
  #             # A required field containing the Vault Role to assume.
  #             role: "k8s-secrets"

  # secrets:
  #   - name: sso-secret
  #     secretStore:
  #       backend: sso-secret-store
  #       kind: SecretStore
  #     target:
  #       name: oauth2
  #     data:
  #       - secretKey: client-id
  #         remoteRef:
  #           key: secrets/sso
  #           property: clientid
  #       - secretKey: client-secret
  #         remoteRef:
  #           key: secrets/sso
  #           property: clientsecret
  #       - secretKey: cookie-secret
  #         remoteRef:
  #           key: secrets/sso
  #           property: jwtsecret

janus:
  enabled: true
  host: {{ .Values.ingress.hosts.auth.host | quote }}
  certmanagerIssuer:
    name: {{ .Values.ingress.certmanagerissuer | quote }}
    kind: ClusterIssuer

  ingressRoutes:
    - name: dex
      entryPoints:
        - websecure
      routes:
      - kind: Rule
        match: PathPrefix(`/`)
        services:
          - name: dex
            port: 5556
      certificate:
        enabled: true